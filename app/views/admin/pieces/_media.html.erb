<%= form_with model: model, url: admin_category_piece_path, method: :patch, multipart: true do |form| %>
  <div class="form-group">
    <p style="font-weight: 600" class="float-left">Media</p>
    <label for="piece_assets" class="btn-link float-right" style="font-weight: 400">+ add</label>
  </div>
  <div class="clearfix"></div>
  <div class="js-sortable">
    <% model.assets.each do |asset| %>
      <div class="clearfix p-1 border border-gray mb-2 js-sortable-item" data-id="<%= asset.id %>" style="display:flex;">
        <div class="mr-3">
          <%= image_tag rails_blob_url(asset), style: "width: 100px; display: block;" %>
        </div>
        <div class="flex-1"></div>
        <div class="d-flex flex-items-center flex-justify-center mr-2 trashcan" style="width: 20px;">
          <%= octicon "trashcan" %>
        </div>
        <div class="handle d-flex flex-items-center flex-justify-center" style="width: 20px;">
          <%= octicon "grabber", width: 12 %>
        </div>
      </div>
    <% end %>
  </div>
  <%= form.file_field :assets, multiple: true, class: "file-input js-file-input" %>
  <%= form.hidden_field :media_positions, value: model.media_positions.join(","), class: "js-media-positions" %>
  <% model.assets.each do |asset| %>
    <%= form.hidden_field :assets, multiple: true, value: asset.signed_id, id: nil %>
  <% end %>
<% end %>
