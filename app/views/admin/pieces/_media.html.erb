<%= form_with model: model, url: admin_category_pieces_assets_path, method: :patch, multipart: true do |form| %>
  <div class="form-group">
    <p style="font-weight: 600" class="float-left">Media</p>
    <label for="piece_assets" class="btn-link float-right" style="font-weight: 400">+ add</label>
  </div>
  <div class="clearfix"></div>
  <%= form.file_field :assets, multiple: true, class: "file-input js-file-input" %>
  <%= form.hidden_field :ordered_ids, class: "js-ordered-media-ids" %>
  <% assets.each do |asset| %>
    <%= form.hidden_field :assets, multiple: true, value: asset.signed_id, id: nil %>
  <% end %>
<% end %>
<div class="js-sortable sortable">
  <% assets.each do |asset| %>
    <div class="clearfix p-1 border border-gray mb-2 js-sortable-item" data-media-id="<%= asset.id %>" data-id="<%= asset.id %>" style="display:flex;">
      <div class="mr-3 flex-1">
        <%= image_tag rails_blob_url(asset), style: "width: 100px; display: block;" %>
      </div>
      <div class="d-flex flex-items-center flex-justify-center">
        <%= form_with model: model, url: admin_category_piece_asset_path(asset_id: asset), method: :delete do |form| %>
          <div class="trashcan js-piece-delete p-2" style="margin-top: -3px;">
            <%= octicon "trashcan" %>
          </div>
        <% end %>
      </div>
      <div class="handle d-flex flex-items-center flex-justify-center p-2">
        <%= octicon "grabber", width: 12 %>
      </div>
    </div>
  <% end %>
</div>
